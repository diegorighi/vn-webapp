<article class="cliente-list">
  <!-- Header -->
  <header class="cliente-list__header">
    <div class="cliente-list__title-area">
      <h1 class="cliente-list__title">Clientes</h1>
      <p class="cliente-list__subtitle">Gerencie os clientes cadastrados no sistema</p>
    </div>
    <a routerLink="/app/clientes/novo" class="btn btn--primary">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
        <path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"/>
      </svg>
      Novo Cliente
    </a>
  </header>

  <!-- Stats Cards -->
  <section class="cliente-list__stats">
    <div class="stat-mini">
      <span class="stat-mini__value">{{ totalClientes() }}</span>
      <span class="stat-mini__label">Total</span>
    </div>
    <div class="stat-mini stat-mini--success">
      <span class="stat-mini__value">{{ clientesAtivos() }}</span>
      <span class="stat-mini__label">Ativos</span>
    </div>
    <div class="stat-mini stat-mini--warning">
      <span class="stat-mini__value">{{ totalClientes() - clientesAtivos() }}</span>
      <span class="stat-mini__label">Inativos</span>
    </div>
  </section>

  <!-- Filters -->
  <section class="cliente-list__filters">
    <div class="search-box">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="search-box__icon">
        <path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/>
      </svg>
      <input
        type="text"
        class="search-box__input"
        placeholder="Buscar por nome, email ou CPF..."
        [value]="searchTerm()"
        (input)="onSearchChange($event)"
        aria-label="Buscar clientes">
    </div>

    <div class="filter-select">
      <label for="statusFilter" class="filter-select__label">Status:</label>
      <select
        id="statusFilter"
        class="filter-select__select"
        [value]="statusFilter()"
        (change)="onStatusFilterChange($event)">
        <option value="TODOS">Todos</option>
        <option value="ATIVO">Ativo</option>
        <option value="INATIVO">Inativo</option>
        <option value="PENDENTE">Pendente</option>
      </select>
    </div>
  </section>

  <!-- Table -->
  <section class="cliente-list__table-container">
    @if (filteredClientes.length > 0) {
      <table class="data-table">
        <thead class="data-table__head">
          <tr>
            <th class="data-table__th">Cliente</th>
            <th class="data-table__th">Contato</th>
            <th class="data-table__th">CPF</th>
            <th class="data-table__th">Cidade/UF</th>
            <th class="data-table__th">Status</th>
            <th class="data-table__th data-table__th--actions">Acoes</th>
          </tr>
        </thead>
        <tbody class="data-table__body">
          @for (cliente of filteredClientes; track cliente.id) {
            <tr class="data-table__row">
              <td class="data-table__td">
                <div class="cliente-info">
                  <span class="cliente-info__avatar">
                    {{ cliente.nome.charAt(0) }}{{ cliente.sobrenome.charAt(0) }}
                  </span>
                  <div class="cliente-info__details">
                    <span class="cliente-info__name">{{ cliente.nome }} {{ cliente.sobrenome }}</span>
                    <span class="cliente-info__since">Desde {{ formatDate(cliente.criadoEm) }}</span>
                  </div>
                </div>
              </td>
              <td class="data-table__td">
                <div class="contact-info">
                  <span class="contact-info__email">{{ getContatoEmail(cliente) }}</span>
                  <span class="contact-info__phone">{{ getContatoTelefone(cliente) }}</span>
                </div>
              </td>
              <td class="data-table__td">
                @if (getDocumentoPrincipal(cliente); as doc) {
                  <span class="cpf-badge">{{ doc.numero }}</span>
                }
              </td>
              <td class="data-table__td">
                @if (getEnderecoPrincipal(cliente); as end) {
                  {{ end.cidade }}/{{ end.estado }}
                }
              </td>
              <td class="data-table__td">
                <span class="status" [class]="getStatusClass(cliente.status)">
                  {{ getStatusLabel(cliente.status) }}
                </span>
              </td>
              <td class="data-table__td data-table__td--actions">
                <div class="actions">
                  <button
                    type="button"
                    class="actions__btn actions__btn--view"
                    (click)="viewCliente(cliente)"
                    title="Visualizar">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
                      <path d="M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/>
                    </svg>
                  </button>
                  <a
                    [routerLink]="['/clientes', cliente.id, 'editar']"
                    class="actions__btn actions__btn--edit"
                    title="Editar">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
                      <path d="M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"/>
                    </svg>
                  </a>
                  <button
                    type="button"
                    class="actions__btn actions__btn--toggle"
                    [class.actions__btn--active]="cliente.status === 'ATIVO'"
                    (click)="toggleStatus(cliente)"
                    [title]="cliente.status === 'ATIVO' ? 'Inativar' : 'Ativar'">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
                      @if (cliente.status === 'ATIVO') {
                        <path d="M17 7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h10c2.76 0 5-2.24 5-5s-2.24-5-5-5zm0 8c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3z"/>
                      } @else {
                        <path d="M17 7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h10c2.76 0 5-2.24 5-5s-2.24-5-5-5zM7 15c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3z"/>
                      }
                    </svg>
                  </button>
                  <button
                    type="button"
                    class="actions__btn actions__btn--delete"
                    (click)="confirmDelete(cliente)"
                    title="Excluir">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
                      <path d="M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"/>
                    </svg>
                  </button>
                </div>
              </td>
            </tr>
          }
        </tbody>
      </table>
    } @else {
      <div class="empty-state">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="empty-state__icon">
          <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/>
        </svg>
        <h3 class="empty-state__title">Nenhum cliente encontrado</h3>
        <p class="empty-state__text">
          @if (searchTerm() || statusFilter() !== 'TODOS') {
            Tente ajustar os filtros de busca
          } @else {
            Comece cadastrando seu primeiro cliente
          }
        </p>
        @if (!searchTerm() && statusFilter() === 'TODOS') {
          <a routerLink="/app/clientes/novo" class="btn btn--primary">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
              <path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"/>
            </svg>
            Cadastrar Cliente
          </a>
        }
      </div>
    }
  </section>
</article>

<!-- View Modal (READ-ONLY) -->
@if (showViewModal() && clienteToView(); as cliente) {
  <div class="modal-overlay modal-overlay--large" (click)="closeViewModal()">
    <div class="view-modal" (click)="$event.stopPropagation()" role="dialog" aria-modal="true">
      <!-- Header -->
      <div class="view-modal__header">
        <div class="view-modal__title-area">
          <div class="view-modal__avatar">
            {{ cliente.nome.charAt(0) }}{{ cliente.sobrenome.charAt(0) }}
          </div>
          <div>
            <h2 class="view-modal__title">{{ cliente.nome }} {{ cliente.sobrenome }}</h2>
            <span class="view-modal__subtitle">Cliente desde {{ formatDate(cliente.criadoEm) }}</span>
          </div>
        </div>
        <div class="view-modal__actions">
          <span class="view-modal__status" [class]="'view-modal__status--' + cliente.status.toLowerCase()">
            {{ getStatusLabel(cliente.status) }}
          </span>
          <button type="button" class="view-modal__close" (click)="closeViewModal()" aria-label="Fechar">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
              <path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/>
            </svg>
          </button>
        </div>
      </div>

      <!-- Tabs -->
      <div class="view-tabs">
        <button 
          type="button" 
          class="view-tabs__btn" 
          [class.view-tabs__btn--active]="activeTab() === 'dados'"
          (click)="setActiveTab('dados')">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
            <path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/>
          </svg>
          Dados Pessoais
        </button>
        <button 
          type="button" 
          class="view-tabs__btn" 
          [class.view-tabs__btn--active]="activeTab() === 'viagens'"
          (click)="setActiveTab('viagens')">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
            <path d="M21 16v-2l-8-5V3.5c0-.83-.67-1.5-1.5-1.5S10 2.67 10 3.5V9l-8 5v2l8-2.5V19l-2 1.5V22l3.5-1 3.5 1v-1.5L13 19v-5.5l8 2.5z"/>
          </svg>
          Viagens
          <span class="view-tabs__badge">{{ viagens().length }}</span>
        </button>
      </div>

      <!-- Body -->
      <div class="view-modal__body">
        <!-- Dados Pessoais -->
        <div class="view-tab-content" [class.view-tab-content--active]="activeTab() === 'dados'">
        <section class="view-section">
          <h3 class="view-section__title">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
              <path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/>
            </svg>
            Dados Pessoais
          </h3>
          <div class="view-grid view-grid--3">
            <div class="view-field">
              <label class="view-field__label">Nome</label>
              <span class="view-field__value">{{ cliente.nome }}</span>
            </div>
            <div class="view-field">
              <label class="view-field__label">Sobrenome</label>
              <span class="view-field__value">{{ cliente.sobrenome }}</span>
            </div>
            <div class="view-field">
              <label class="view-field__label">Data de Nascimento</label>
              <span class="view-field__value">{{ formatDate(cliente.dataNascimento) }}</span>
            </div>
          </div>
        </section>

        <!-- Documentos -->
        <section class="view-section">
          <h3 class="view-section__title">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
              <path d="M14 2H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8l-6-6zm2 16H8v-2h8v2zm0-4H8v-2h8v2zm-3-5V3.5L18.5 9H13z"/>
            </svg>
            Documentos
          </h3>
          <div class="view-array">
            @for (doc of cliente.documentos; track $index) {
              <div class="view-array__item">
                <span class="view-array__badge" [class.view-array__badge--principal]="doc.principal">
                  {{ doc.principal ? 'Principal' : 'Documento ' + ($index + 1) }}
                </span>
                <div class="view-grid view-grid--2">
                  <div class="view-field">
                    <label class="view-field__label">Tipo</label>
                    <span class="view-field__value">{{ getTipoDocumentoLabel(doc.tipo) }}</span>
                  </div>
                  <div class="view-field">
                    <label class="view-field__label">Numero</label>
                    <span class="view-field__value">{{ doc.numero }}</span>
                  </div>
                </div>
                
                <!-- Documento Digitalizado -->
                @if (doc.arquivoUrl) {
                  <div class="view-field view-field--full" style="margin-top: 1.6rem;">
                    <label class="view-field__label">Documento Digitalizado</label>
                    <div class="doc-preview">
                      <div class="doc-preview__image">
                        <img [src]="doc.arquivoUrl" [alt]="'Digitalizacao do ' + doc.tipo" (error)="onImageError($event)">
                        <div class="doc-preview__placeholder">
                          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M21 19V5c0-1.1-.9-2-2-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2zM8.5 13.5l2.5 3.01L14.5 12l4.5 6H5l3.5-4.5z"/>
                          </svg>
                          <span>Imagem indisponivel</span>
                        </div>
                      </div>
                      <div class="doc-preview__overlay">
                        <button 
                          type="button" 
                          class="doc-preview__zoom"
                          (click)="openImageModal(doc.arquivoUrl!, doc.tipo)">
                          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14zM12 10h-2v2H9v-2H7V9h2V7h1v2h2v1z"/>
                          </svg>
                          Ampliar
                        </button>
                      </div>
                    </div>
                  </div>
                } @else {
                  <div class="view-field view-field--full" style="margin-top: 1.6rem;">
                    <label class="view-field__label">Documento Digitalizado</label>
                    <div class="doc-missing">
                      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M19.35 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96zM14 13v4h-4v-4H7l5-5 5 5h-3z"/>
                      </svg>
                      <span>Nenhum documento digitalizado</span>
                    </div>
                  </div>
                }
              </div>
            }
          </div>
        </section>

        <!-- Contatos -->
        <section class="view-section">
          <h3 class="view-section__title">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
              <path d="M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4l-8 5-8-5V6l8 5 8-5v2z"/>
            </svg>
            Contatos
          </h3>
          <div class="view-array">
            @for (contato of cliente.contatos; track $index) {
              <div class="view-array__item">
                <span class="view-array__badge" [class.view-array__badge--principal]="contato.principal">
                  {{ contato.principal ? 'Principal' : 'Contato ' + ($index + 1) }}
                </span>
                <div class="view-grid view-grid--2">
                  <div class="view-field">
                    <label class="view-field__label">Tipo</label>
                    <span class="view-field__value">{{ getTipoContatoLabel(contato.tipo) }}</span>
                  </div>
                  <div class="view-field">
                    <label class="view-field__label">Valor</label>
                    <span class="view-field__value">{{ contato.valor }}</span>
                  </div>
                </div>
              </div>
            }
          </div>
        </section>

        <!-- Enderecos -->
        <section class="view-section">
          <h3 class="view-section__title">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
              <path d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z"/>
            </svg>
            Enderecos
          </h3>
          <div class="view-array">
            @for (end of cliente.enderecos; track $index) {
              <div class="view-array__item">
                <span class="view-array__badge" [class.view-array__badge--principal]="end.principal">
                  {{ end.principal ? 'Principal' : 'Endereco ' + ($index + 1) }}
                </span>
                <div class="view-grid view-grid--4">
                  <div class="view-field">
                    <label class="view-field__label">Tipo</label>
                    <span class="view-field__value">{{ getTipoEnderecoLabel(end.tipo) }}</span>
                  </div>
                  <div class="view-field view-field--span-2">
                    <label class="view-field__label">Logradouro</label>
                    <span class="view-field__value">{{ end.logradouro }}, {{ end.numero }}</span>
                  </div>
                  <div class="view-field">
                    <label class="view-field__label">CEP</label>
                    <span class="view-field__value">{{ end.cep }}</span>
                  </div>
                  <div class="view-field">
                    <label class="view-field__label">Bairro</label>
                    <span class="view-field__value">{{ end.bairro }}</span>
                  </div>
                  <div class="view-field">
                    <label class="view-field__label">Cidade</label>
                    <span class="view-field__value">{{ end.cidade }}</span>
                  </div>
                  <div class="view-field">
                    <label class="view-field__label">Estado</label>
                    <span class="view-field__value">{{ end.estado }}</span>
                  </div>
                  <div class="view-field">
                    <label class="view-field__label">Complemento</label>
                    <span class="view-field__value">{{ end.complemento || '-' }}</span>
                  </div>
                </div>
              </div>
            }
          </div>
        </section>

        <!-- Observacoes -->
        @if (cliente.observacoes) {
          <section class="view-section">
            <h3 class="view-section__title">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
                <path d="M19 3h-4.18C14.4 1.84 13.3 1 12 1c-1.3 0-2.4.84-2.82 2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-7 0c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zm2 14H7v-2h7v2zm3-4H7v-2h10v2zm0-4H7V7h10v2z"/>
              </svg>
              Observacoes
            </h3>
            <div class="view-field">
              <p class="view-field__text">{{ cliente.observacoes }}</p>
            </div>
          </section>
        }
        </div>

        <!-- Viagens -->
        <div class="view-tab-content" [class.view-tab-content--active]="activeTab() === 'viagens'">
          @if (viagens().length === 0) {
            <div class="view-empty">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
                <path d="M21 16v-2l-8-5V3.5c0-.83-.67-1.5-1.5-1.5S10 2.67 10 3.5V9l-8 5v2l8-2.5V19l-2 1.5V22l3.5-1 3.5 1v-1.5L13 19v-5.5l8 2.5z"/>
              </svg>
              <h4 class="view-empty__title">Nenhuma viagem cadastrada</h4>
              <p class="view-empty__text">Este cliente ainda nao possui viagens cadastradas.</p>
            </div>
          } @else {
            <div class="view-section">
              <h4 class="view-section__title">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
                  <path d="M21 16v-2l-8-5V3.5c0-.83-.67-1.5-1.5-1.5S10 2.67 10 3.5V9l-8 5v2l8-2.5V19l-2 1.5V22l3.5-1 3.5 1v-1.5L13 19v-5.5l8 2.5z"/>
                </svg>
                Historico de Viagens
              </h4>
              <div class="view-trips">
                @for (viagem of viagens(); track viagem.id) {
                  <div class="trip-card">
                    <div class="trip-card__header">
                      <div class="trip-card__route">
                        <span class="trip-card__city">{{ viagem.origem }}</span>
                        <svg class="trip-card__arrow" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
                          <path d="M12 4l-1.41 1.41L16.17 11H4v2h12.17l-5.58 5.59L12 20l8-8z"/>
                        </svg>
                        <span class="trip-card__city">{{ viagem.destino }}</span>
                      </div>
                      <span class="trip-card__status" [class]="getViagemStatusClass(viagem.status)">
                        {{ getViagemStatusLabel(viagem.status) }}
                      </span>
                    </div>
                    <div class="trip-card__body">
                      <div class="trip-card__info">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
                          <path d="M19 3h-1V1h-2v2H8V1H6v2H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V8h14v11zM9 10H7v2h2v-2zm4 0h-2v2h2v-2zm4 0h-2v2h2v-2zm-8 4H7v2h2v-2zm4 0h-2v2h2v-2zm4 0h-2v2h2v-2z"/>
                        </svg>
                        <span>{{ viagem.dataViagem | date:'dd/MM/yyyy' }}</span>
                      </div>
                      @if (viagem.companhia) {
                        <div class="trip-card__info">
                          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M21 16v-2l-8-5V3.5c0-.83-.67-1.5-1.5-1.5S10 2.67 10 3.5V9l-8 5v2l8-2.5V19l-2 1.5V22l3.5-1 3.5 1v-1.5L13 19v-5.5l8 2.5z"/>
                          </svg>
                          <span>{{ viagem.companhia }} - {{ viagem.classe }}</span>
                        </div>
                      }
                      @if (viagem.valor) {
                        <div class="trip-card__info trip-card__info--highlight">
                          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M11.8 10.9c-2.27-.59-3-1.2-3-2.15 0-1.09 1.01-1.85 2.7-1.85 1.78 0 2.44.85 2.5 2.1h2.21c-.07-1.72-1.12-3.3-3.21-3.81V3h-3v2.16c-1.94.42-3.5 1.68-3.5 3.61 0 2.31 1.91 3.46 4.7 4.13 2.5.6 3 1.48 3 2.41 0 .69-.49 1.79-2.7 1.79-2.06 0-2.87-.92-2.98-2.1h-2.2c.12 2.19 1.76 3.42 3.68 3.83V21h3v-2.15c1.95-.37 3.5-1.5 3.5-3.55 0-2.84-2.43-3.81-4.7-4.4z"/>
                          </svg>
                          <span>{{ viagem.valor }}</span>
                        </div>
                      }
                    </div>
                  </div>
                }
              </div>
            </div>
          }
        </div>
      </div>

      <!-- Footer -->
      <div class="view-modal__footer">
        <button type="button" class="btn btn--ghost" (click)="closeViewModal()">Fechar</button>
        <a [routerLink]="['/clientes', cliente.id, 'editar']" class="btn btn--primary" (click)="closeViewModal()">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
            <path d="M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"/>
          </svg>
          Editar Cliente
        </a>
      </div>
    </div>
  </div>
}

<!-- Image Zoom Modal -->
@if (showImageModal()) {
  <div class="modal-overlay modal-overlay--image" (click)="closeImageModal()">
    <div class="image-modal" (click)="$event.stopPropagation()">
      <div class="image-modal__header">
        <h3 class="image-modal__title">{{ imageModalTitle() }}</h3>
        <button type="button" class="image-modal__close" (click)="closeImageModal()" aria-label="Fechar">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
            <path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/>
          </svg>
        </button>
      </div>
      <div class="image-modal__body">
        <img [src]="imageModalUrl()" [alt]="imageModalTitle()" class="image-modal__img">
      </div>
    </div>
  </div>
}

<!-- Delete Modal -->
@if (showDeleteModal()) {
  <div class="modal-overlay" (click)="cancelDelete()">
    <div class="modal" (click)="$event.stopPropagation()" role="dialog" aria-modal="true">
      <div class="modal__header">
        <h2 class="modal__title">Confirmar Exclusao</h2>
        <button type="button" class="modal__close" (click)="cancelDelete()" aria-label="Fechar">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
            <path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/>
          </svg>
        </button>
      </div>
      <div class="modal__body">
        <p>Tem certeza que deseja excluir o cliente <strong>{{ clienteToDelete()?.nome }} {{ clienteToDelete()?.sobrenome }}</strong>?</p>
        <p class="modal__warning">Esta acao nao pode ser desfeita.</p>
      </div>
      <div class="modal__footer">
        <button type="button" class="btn btn--ghost" (click)="cancelDelete()">Cancelar</button>
        <button type="button" class="btn btn--danger" (click)="executeDelete()">Excluir</button>
      </div>
    </div>
  </div>
}
